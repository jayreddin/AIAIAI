<!DOCTYPE html>
 <html lang="en">


 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Puter AI Chat App</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
 </head>


 <body>
  <header id="header-container">
   <div class="header-content">
       <div class="model-selector-container">
           <label for="model-selector">Model:</label>
           <select id="model-selector">
               <option value="">Loading Models...</option>
           </select>
       </div>
       <div class="user-info-container">
           <div id="username-display" style="display: none; margin-bottom: 3px; font-size: 0.8em; color: #555;"></div>
           <button id="signout-button" style="display: none;">Sign Out</button>
       </div>
   </div>
  </header>


  <main id="app-container">
  <h1>Puter AI Chat App</h1>
  <div id="auth-section">
   <button id="signin-button">Sign In with Puter</button>
   <div id="auth-status">Checking sign-in status...</div>
  </div>


  <div id="chat-ui" style="display: none;">
  <div id="message-display">
  </div>


  <div id="bottom-banner">
   <button id="new-chat-btn" class="banner-button" title="New Chat"><i class="fas fa-plus"></i></button>
   <button id="history-btn" class="banner-button" title="Chat History"><i class="fas fa-history"></i></button>
   <button id="img-gen-btn" class="banner-button" title="Image Generation"><i class="fas fa-image"></i></button>
   <button id="ocr-btn" class="banner-button" title="OCR (Image to Text)"><i class="fas fa-file-alt"></i></button>
   <button id="vision-btn" class="banner-button" title="Vision (Camera)"><i class="fas fa-eye"></i></button>
   <button id="tts-btn" class="banner-button" title="Text-to-Speech Mode"><i class="fas fa-volume-up"></i></button>
   <button id="settings-btn" class="banner-button" title="Settings"><i class="fas fa-cog"></i></button>
  </div>


  <div id="input-area">
   <button id="mic-button" title="Microphone Input">ðŸŽ¤</button>
   <textarea id="chat-input" placeholder="Type your message here..." rows="1"></textarea>
   <button id="send-button" title="Send Message">âž¤</button>
  </div>
  </div>
  </main>


  <div id="popup-backdrop" class="popup-backdrop" style="display: none;"></div>


  <div id="history-popup" class="popup" style="display: none;">
  <h2>Chat History</h2>
  <div id="history-list">
      <p>Loading history...</p>
  </div>
  <button class="close-popup-btn">Close</button>
  </div>

  <div id="img-gen-popup" class="popup" style="display: none;">
   <h2>Image Generation</h2>
   <div id="img-gen-content">
       <div id="img-gen-modes">
           <button class="img-gen-mode-btn active" data-mode="basic">Basic</button>
           <button class="img-gen-mode-btn" data-mode="story">Story</button>
           <button class="img-gen-mode-btn" data-mode="card">Card</button>
           <button class="img-gen-mode-btn" data-mode="comic">Comic</button>
       </div>
       <div id="img-gen-mode-ui">
           <div id="img-gen-basic-mode" class="img-gen-mode-panel active">
               <textarea id="img-gen-prompt" placeholder="Enter image prompt..." rows="3"></textarea>
               <button id="img-gen-generate-btn">Generate</button>
           </div>
           <div id="img-gen-story-mode" class="img-gen-mode-panel">
               <p><i>Story Mode - UI and Logic TBD</i></p>
               <input type="text" placeholder="Character(s)..."> <input type="text" placeholder="Setting...">
               <textarea placeholder="Plot Summary..." rows="3"></textarea>
               <button disabled>Generate Story (TBD)</button> <button disabled>Download PDF (TBD)</button>
           </div>
           <div id="img-gen-card-mode" class="img-gen-mode-panel">
               <p><i>Card Mode - UI and Logic TBD</i></p>
               <select> <option>Type (Birthday, Thank You...)</option> </select>
               <textarea placeholder="Visual Description..." rows="2"></textarea> <input type="text" placeholder="Recipient...">
               <textarea placeholder="Message..." rows="2"></textarea> <button disabled>Generate Card (TBD)</button>
           </div>
           <div id="img-gen-comic-mode" class="img-gen-mode-panel">
                <p><i>Comic Mode - UI and Logic TBD</i></p>
               <input type="text" placeholder="Character(s)..."> <input type="text" placeholder="Setting...">
               <textarea placeholder="Plot Summary (Panel by Panel)..." rows="3"></textarea>
               <button disabled>Generate Comic (TBD)</button> <button disabled>Download PDF (TBD)</button>
           </div>
       </div>
       <div id="img-gen-results-heading" style="margin-top: 15px; font-weight: bold;">Results:</div>
       <div id="img-gen-results">
           <div id="img-gen-loading" style="display: none; text-align: center; padding: 20px;">Generating image... <i class="fas fa-spinner fa-spin"></i></div>
           <div id="img-gen-error" style="display: none; color: red; text-align: center; padding: 10px;"></div>
       </div>
   </div>
   <button class="close-popup-btn">Close</button>
  </div>

  <div id="ocr-popup" class="popup" style="display: none;">
      <h2>OCR (Image to Text)</h2>
      <div id="ocr-content">
          <input type="file" id="ocr-file-input" accept="image/*" style="display: none;">
          <button id="ocr-upload-btn"><i class="fas fa-upload"></i> Upload Image</button>
          <div id="ocr-thumbnail-area">
              </div>
          <button id="ocr-extract-btn" disabled><i class="fas fa-search-plus"></i> Extract Text</button>
          <div id="ocr-status" style="text-align: center; margin: 10px 0; display: none;"></div>
          <textarea id="ocr-result-text" placeholder="Extracted text will appear here..." rows="8" readonly></textarea>
          <button id="ocr-copy-btn" disabled><i class="fas fa-copy"></i> Copy Text</button>
      </div>
      <button class="close-popup-btn">Close</button>
  </div>
  <div id="vision-popup" class="popup" style="display: none;">
  <h2>Vision</h2>
  <p>[Vision content will go here - Phase 13]</p>
  <button class="close-popup-btn">Close</button>
  </div>
  <div id="tts-popup" class="popup" style="display: none;">
  <h2>Text-to-Speech Mode</h2>
  <div id="tts-input-area">
   <textarea id="tts-text-input" placeholder="Enter text to speak"></textarea>
   <div id="tts-controls">
    <button id="tts-send-button" title="Speak Text"><i class="fas fa-play"></i></button>
    <button id="tts-mic-button" title="Record Audio"><i class="fas fa-microphone"></i></button>
   </div>
  </div>
  <div id="tts-output-heading" style="margin-top: 15px; font-weight: bold;">Generated Speech / Recordings:</div>
  <div id="tts-output-area" style="margin-top: 5px; max-height: 200px; overflow-y: auto; border: 1px solid #eee; padding: 10px; border-radius: 5px;">
   </div>
  <button class="close-popup-btn">Close</button>
  </div>
  <div id="settings-popup" class="popup" style="display: none;">
  <h2>Settings</h2>
  <p>[Settings content will go here - Phase 14]</p>
  <button class="close-popup-btn">Close</button>
  </div>

  <div id="image-modal-backdrop" class="popup-backdrop" style="display: none; z-index: 1001;"></div>
  <div id="image-modal" class="popup" style="display: none; z-index: 1002; padding: 10px; max-width: 90%; max-height: 90%;">
      <img id="expanded-image" src="#" alt="Expanded Image" style="max-width: 100%; max-height: calc(85vh - 60px); display: block; margin: 0 auto;">
      <div id="image-modal-controls" style="text-align: center; margin-top: 10px;">
          <button id="image-modal-save">Save</button>
          <button id="image-modal-close">Close</button>
      </div>
  </div>


  <script src="https://js.puter.com/v2/"></script>
  <script src="script.js"></script>
 </body>
 </html>